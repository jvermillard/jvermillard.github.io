<!doctype html><html dir=ltr lang=en data-theme class=html><head><title>Bootstrapping device security with Lightweight M2M |
Julien Vermillard</title><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Julien Vermillard"><meta name=description content="
      Julien Vermillard


    "><link rel=stylesheet href=/scss/main.min.5259d55db7b9c675f751f0865411bd84a410f3ffcb5105b8fc00b22fcb739309.css integrity="sha256-UlnVXbe5xnX3UfCGVBG9hKQQ8//LUQW4/ACyL8tzkwk=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.69685904d5c2a0c6258d03c207b778c10466edf6cea928cc0164c376b0ad0930.css integrity="sha256-aWhZBNXCoMYljQPCB7d4wQRm7fbOqSjMAWTDdrCtCTA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.6d585e78d28cce1200d39fb133c92ed83df01738da721d0f48fb6eac62d24e04.css integrity="sha256-bVheeNKMzhIA05+xM8ku2D3wFzjach0PSPturGLSTgQ=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.6b00d96498d59caa0dbcf9b49d30d821915291f2ceb0e19248523c8607ff43fa.css integrity="sha256-awDZZJjVnKoNvPm0nTDYIZFSkfLOsOGSSFI8hgf/Q/o=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=http://vermillard.com/post/lwm2m-bootstrap/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.738c0e3a493854876aeab9e2316fd43f1936aeeac4cc6b3e60bb26456dba72ad.js integrity="sha256-c4wOOkk4VIdq6rniMW/UPxk2rurEzGs+YLsmRW26cq0=" crossorigin=anonymous></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://vermillard.com/images/site-feature-image.png"><meta name=twitter:title content="Bootstrapping device security with Lightweight M2M"><meta name=twitter:description content="During the last OMA LWM2M Test Fest I was quite surprised the bootstrap procedure wasn’t present in the test cases proposed by the organizers."><meta property="og:title" content="Bootstrapping device security with Lightweight M2M"><meta property="og:description" content="During the last OMA LWM2M Test Fest I was quite surprised the bootstrap procedure wasn’t present in the test cases proposed by the organizers."><meta property="og:type" content="article"><meta property="og:url" content="http://vermillard.com/post/lwm2m-bootstrap/"><meta property="og:image" content="http://vermillard.com/images/site-feature-image.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2015-02-15T00:00:00+00:00"><meta property="article:modified_time" content="2015-02-15T00:00:00+00:00"><meta property="og:site_name" content="My blog"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"Bootstrapping device security with Lightweight M2M","headline":"Bootstrapping device security with Lightweight M2M","alternativeHeadline":"","description":"
      
        During the last OMA LWM2M Test Fest I was quite surprised the bootstrap procedure wasn’t present in the test cases proposed by the organizers.


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/vermillard.com\/post\/lwm2m-bootstrap\/"},"author":{"@type":"Person","name":"Julien Vermillard"},"creator":{"@type":"Person","name":"Julien Vermillard"},"accountablePerson":{"@type":"Person","name":"Julien Vermillard"},"copyrightHolder":{"@type":"Person","name":"Julien Vermillard"},"copyrightYear":"2015","dateCreated":"2015-02-15T00:00:00.00Z","datePublished":"2015-02-15T00:00:00.00Z","dateModified":"2015-02-15T00:00:00.00Z","publisher":{"@type":"Organization","name":"Julien Vermillard","url":"http://vermillard.com/","logo":{"@type":"ImageObject","url":"http:\/\/vermillard.com\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":["http://vermillard.com/images/site-feature-image.png"],"url":"http:\/\/vermillard.com\/post\/lwm2m-bootstrap\/","wordCount":"539","genre":[],"keywords":["LWM2M","leshan","security","Internet-of-Things"]}</script></head><body class="body theme--light"><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/profile.png alt="profile picture"><h1 class=sidebar__introduction-title><a href=/>My blog</a></h1><div class=sidebar__introduction-description><p>Julien Vermillard</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://linkedin.com/in/jvermillard/ rel=me aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://twitter.com/vrmvrm rel=me aria-label=Twitter title=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://github.com/jvermillard/ rel=me aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:julien@vermillard.com rel=me aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=/documents/cv.pdf rel=me aria-label=resume title=resume><i class="fas fa-file-pdf fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2021 - 2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LTB2J9BZZP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LTB2J9BZZP")</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/post/ title>Posts</a></li><li class=nav__list-item><a href=/portfolio/ title>Portfolio</a></li><li class=nav__list-item><a href=/publicspeaking/ title>Public Speaking</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Bootstrapping Device Security With Lightweight M2M</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>15/2/2015</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>3-minute read</span></li></ul><p>During the last <strong>OMA LWM2M Test Fest</strong> I was quite surprised the <strong>bootstrap</strong> procedure wasn’t present in the test cases proposed by the organizers. Furthermore only few vendors implemented it, or even understand what’s the purpose of this feature. So I decided to write this little introduction.</p><p>Bootstrapping is the procedure for the device to get the secret keys and URL for reaching the servers. It’s also useful for re-keying, upgrading security scheme or redirecting your device to another server.</p><h2 id=why-not-hardcode-final-server-url-and-credentials-at-factory>Why not “hardcode” final server URL and credentials at factory?</h2><p>Well it’s possible, it’s called <strong>“factory bootstrap”</strong>, but it’s not a good practice: if you need to change the server URL or credentials (passwords) you will need to have physical access to the device. This is not so IoT ☺.</p><p>Here come the so-called “device initiated bootstrap”. During the factory flashing you just put “bootstrap credentials” for reaching a bootstrap server. The bootstrap server only feature is to answer bootstrap request (POST on /bs) and to configure the device with servers URL and credentials (private key, certificate, pre-shared-keys, etc..).</p><p>The parameters configured during bootstrap are:</p><p><strong>Server security credentials:</strong></p><ul><li>pre-shared keys for secure <strong>DTLS PSK</strong> communications</li><li>or private key and certificate for <strong>DTLS RPK</strong> or <strong>X.509</strong> communications</li><li><strong>URLs</strong> for reaching the server like “coaps://my.server.com:5684"</li><li><strong>SMS security</strong> parameters for communicating with the device or the server</li></ul><p><strong>Communication parameters:</strong></p><ul><li>communication frequency (lifetime)</li><li>binding mode: does the device is always connected or not, does it uses UDP and/or SMS</li></ul><p><strong>Access Control Lists:</strong></p><ul><li>which server can read/write which objects, like firmware update or connectivity parameters, (only when you have more than one device management server)</li></ul><p>The device can trigger a bootstrap when:</p><ul><li>when the device contains only bootstrap credentials and no device-management server credentials,</li><li>when the device, for any reason, fails to start a communication with the configured device management servers (server not responding, authentication failure, etc..).</li></ul><p><img src=/images/bootstrap.gif alt="The initial bootstrap sequence: how a device get the final device management credentials"></p><p>Why doing security configuration in two steps? Why not putting the key in the factory and wait for the need to change it for triggering a device bootstrap?</p><p>The first advantage: you are sure configuring device credential “over-the-air” is working because you use it at least once during the device lifetime.</p><p>You want to change the credentials in the device because you had a breach in your servers or because you want to rotate your keys/certificate? It’s easy, tested and running! Just invalidate the previous credentials on the server, the device will trigger a re-bootstrap and get the new credentials from the bootstrap server. This procedure can also be used for re-configuring a device for connecting to another server.</p><p>Once past the initial bootstrap, the factory doesn’t know the final secrets used for communicating. So someone breaking into the factory and gathering bootstrap credentials won’t be able to eavesdropping final device-management communications. At least, they could observe the bootstrap communications and discover the device management key for few devices, but they won’t directly have access to your whole fleet.</p><p>Today <a href=https://github.com/eclipse/leshan>Leshan</a> server contains the code for supporting device initiated bootstrap. It’s still an early work, but it’s functional.</p><p><a href=https://github.com/eclipse/wakaama>Wakaama</a> client code doesn’t support the bootstrap procedure, but we are working on it, maybe in a couple of weeks an early support will land in the git repository.</p></div><div class=post__footer><span><a class=tag href=/tags/lwm2m/>LWM2M</a><a class=tag href=/tags/leshan/>leshan</a><a class=tag href=/tags/security/>security</a><a class=tag href=/tags/internet-of-things/>Internet-of-Things</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2021 - 2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LTB2J9BZZP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LTB2J9BZZP")</script></body></html>